import{r as F,S as L,a as Y,o as K,c as y,b as w,d,e as u,f as t,g as $,w as T,F as R,h as G,i as W,j as U,t as P,k as g,v as b,l as D,m as Q,n as X,p as J,q as Z,s as ee,u as E,x as te,y as oe,z as I,A as V,B as se,C as re,D as ae}from"./vendor.0c60887e.js";const ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}};ne();const l=F({user:{},account:{},posts:{},activeProfile:{},searchResults:{},Posts:{},billboards:{},liked:[],totalPages:0,currentPage:1}),N=window.location.origin.includes("localhost"),q=N?"https://bcw-sandbox.herokuapp.com/":"",ie="codeworksclassroom.auth0.com",le="pOXw2OGv1LsYi7LEBmDF04RLkXQvldml",ce="https://codeworksclassroom.com";function S(o,e){if(N)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const c={log(){S("log",arguments)},error(){S("error",arguments)},warn(){S("warn",arguments)},assert(){S("assert",arguments)},trace(){S("trace",arguments)}};class f{static async confirm(e="Are you sure?",r="You won't be able to revert this!",s="warning",n="Yes, delete it!"){try{return!!(await L.fire({title:e,text:r,icon:s,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n})).isConfirmed}catch{return!1}}static toast(e="Warning!",r="warning",s="top-end",n=3e3,i=!0){L.fire({title:e,icon:r,position:s,timer:n,timerProgressBar:i,toast:!0,showConfirmButton:!1})}}const p=Y.create({baseURL:q,timeout:1e4}),_={query:null,creatorId:null,page:1};class de{async getAll(){const e=await p.get("api/posts");l.posts=e.data.posts,l.totalPages=e.data.totalPages,l.currentPage=1}async search(e){_.query=e,_.page=1;const r=await p.get("api/posts",{params:_});l.posts=r.data.posts,l.totalPages=r.data.totalPages}async clearParams(){_.creatorId=null,_.page=1,_.query=null,c.log({params:_})}async changePage(e){_.page=e,_.query=null;const r=await p.get("api/posts/",{params:_});c.log("1",r.data,"2",r.data.posts),c.log({params:_}),l.posts=r.data.posts,l.searchResults=r.data.posts,l.currentPage=e}async getByQuery(e){_.creatorId=e,_.page=1,l.currentPage=1;const r=await p.get("api/posts/",{params:_});l.posts=r.data.posts,l.searchResults=r.data.posts,l.totalPages=r.data.totalPages,c.log("profile",r.data)}async createPost(e){const r=await p.post("api/posts",e);l.posts.push(r.data),this.getAll()}async deletePost(e){await p.delete("api/posts/"+e),this.getAll()}async likePost(e){const r=l.account,s=l.posts.find(i=>i.id===e.id);c.log(s);const n=l.liked.find(i=>i.id===e.id);if(c.log(n),n)s.likes.splice(0,1),l.liked=[],f.toast("unliked","success");else{s.likes.push(r),l.liked.push(s);const i=await p.post("api/posts/"+s.id+"/like",r);l.posts.push(i.data),f.toast("liked","success")}}}const k=new de;class ue{async getBills(){const e=await p.get("api/ads");l.billboards=e.data}}const _e=new ue;var v=(o,e)=>{for(const[r,s]of e)o[r]=s;return o};const pe={name:"App",setup(){return K(async()=>{try{await _e.getBills()}catch(o){c.error(o),f.toast(o.message,"error")}}),{appState:y(()=>l),billboards:y(()=>l.billboards),async clearParams(){await k.clearParams()}}}},me={class:"container-fluid"},ge={class:"row"},fe={class:"d-flex bg-primary p-4 space-between"},he={class:"Home col-6"},be=t("div",{class:"d-flex align-items-center"},[t("i",{class:"mdi mdi-account-cowboy-hat ms-1"}),t("p",{class:"p-0 m-0 ms-2"},"Get on Home")],-1),ve={class:"col-6 d-flex"},ye={class:"float"},Pe=t("footer",null,null,-1);function we(o,e,r,s,n,i){const a=w("router-link"),h=w("Billboard"),x=w("router-view"),H=w("Login");return d(),u(R,null,[t("header",null,[t("div",me,[t("div",ge,[t("div",fe,[t("div",he,[$(a,{class:"navbar-brand text-dark d-flex",to:{name:"Home"},onClick:s.clearParams},{default:T(()=>[be]),_:1},8,["onClick"])]),t("div",ve,[(d(!0),u(R,null,G(s.billboards,O=>(d(),W(h,{key:O.id,billboard:O},null,8,["billboard"]))),128))])])])])]),t("main",null,[$(x),t("div",ye,[$(H)])]),Pe],64)}var ke=v(pe,[["render",we]]);const $e={props:{billboard:{type:Object,required:!0}},setup(){return{openLink(o){window.open("https://"+o)}}}},Se=["src","alt"];function Ae(o,e,r,s,n,i){return d(),u("img",{class:"adimg selectable",onClick:e[0]||(e[0]=a=>s.openLink(r.billboard.linkURL)),src:r.billboard.banner,alt:r.billboard.title},null,8,Se)}var Ee=v($e,[["render",Ae],["__scopeId","data-v-cca5a290"]]),Ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ee});const xe={setup(){const o=U({});return{newPost:o,async createPost(){try{await k.createPost(o.value),o.value={},f.toast("New post!","success")}catch(e){c.error(e),f.toast(e.message,"error")}},account:y(()=>l.account)}}},Te={class:"postmaker w-100 d-flex align-items-center"},Ie={class:"di"},Oe=["src"],Le={class:"text-primary text-center"},Re={class:"form-group m-2"},Ue=t("label",{for:"image url",class:"text-primary py-2"},"Image Url:",-1),De={class:"form-group m-2"},Ve=t("label",{for:"body",class:"text-primary py-2"},"What is up?",-1),Ne=t("button",{type:"submit",class:"btn btn-primary text-dark m-2"},"Post",-1);function qe(o,e,r,s,n,i){const a=w("router-link");return d(),u("div",Te,[t("div",Ie,[$(a,{to:{name:"ProfilePage",params:{id:s.account.id}}},{default:T(()=>[t("img",{class:"profileimg",src:s.account.picture},null,8,Oe)]),_:1},8,["to"]),t("h1",Le,P(s.account.name),1)]),t("form",{onSubmit:e[2]||(e[2]=D((...h)=>s.createPost&&s.createPost(...h),["prevent"])),class:"w-100 p-3"},[t("div",Re,[Ue,g(t("input",{type:"url",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=h=>s.newPost.imgUrl=h),id:"image",placeholder:"url"},null,512),[[b,s.newPost.imgUrl]])]),t("div",De,[Ve,g(t("textarea",{class:"form-control",id:"body","onUpdate:modelValue":e[1]||(e[1]=h=>s.newPost.body=h),rows:"3",placeholder:"Your message to the world wide web..."},null,512),[[b,s.newPost.body]])]),Ne],32)])}var Be=v(xe,[["render",qe]]),je=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Be});const Me={setup(){return{}}},ze={class:"mb-3"},He=t("label",{for:"name",class:"form-label"},"Name",-1),Fe={class:"mb-3"},Ye=t("label",{for:"name",class:"form-label"},"Picture",-1),Ke={class:"mb-3"},Ge=t("label",{for:"name",class:"form-label"},"Cover Image",-1),We={class:"mb-3"},Qe=t("label",{for:"bio",class:"form-label"},"Bio",-1),Xe={class:"mb-3"},Je=t("label",{for:"bio",class:"form-label"},"Class",-1),Ze={class:"mb-3"},et=t("label",{for:"github",class:"form-label"},"Github Profile Link:",-1),tt={class:"mb-3"},ot=t("label",{for:"linkedin",class:"form-label"},"Linkedin Profile Link:",-1),st={class:"mb-3"},rt=t("label",{for:"resume",class:"form-label"},"Resume Link:",-1),at={class:"mb-3"},nt=t("option",null,"true",-1),it=t("option",null,"false",-1),lt=[nt,it],ct=t("button",{class:"btn btn-success ms-2"},"Submit",-1);function dt(o,e,r,s,n,i){return d(),u("form",{class:"bg-dark",onSubmit:e[10]||(e[10]=(...a)=>o.editAccount&&o.editAccount(...a))},[t("div",ze,[He,g(t("input",{type:"text",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"Name..","onUpdate:modelValue":e[0]||(e[0]=a=>o.profile.name=a)},null,512),[[b,o.profile.name]])]),t("div",Fe,[Ye,g(t("input",{type:"text",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"Name..","onUpdate:modelValue":e[1]||(e[1]=a=>o.profile.picture=a)},null,512),[[b,o.profile.picture]])]),t("div",Ke,[Ge,g(t("input",{type:"text",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"image url...","onUpdate:modelValue":e[2]||(e[2]=a=>o.profile.coverImg=a)},null,512),[[b,o.profile.coverImg]])]),t("div",We,[Qe,g(t("input",{type:"text",class:"form-control",id:"bio","aria-describedby":"helpId",placeholder:"Bio...","onUpdate:modelValue":e[3]||(e[3]=a=>o.profile.bio=a)},null,512),[[b,o.profile.bio]])]),t("div",Xe,[Je,g(t("input",{type:"text",class:"form-control",id:"bio","aria-describedby":"helpId",placeholder:"Spring 2022","onUpdate:modelValue":e[4]||(e[4]=a=>o.profile.class=a)},null,512),[[b,o.profile.class]])]),t("div",Ze,[et,g(t("input",{type:"url",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"https://github.com","onUpdate:modelValue":e[5]||(e[5]=a=>o.profile.github=a)},null,512),[[b,o.profile.github]])]),t("div",tt,[ot,g(t("input",{type:"url",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"https://linkedin.com","onUpdate:modelValue":e[6]||(e[6]=a=>o.profile.linkedin=a)},null,512),[[b,o.profile.linkedin]])]),t("div",st,[rt,g(t("input",{type:"url",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"https://yourname.com","onUpdate:modelValue":e[7]||(e[7]=a=>o.profile.resume=a)},null,512),[[b,o.profile.resume]])]),t("div",at,[g(t("select",{class:"form-control form-control-sm","onUpdate:modelValue":e[8]||(e[8]=a=>o.profile.graduated=a)},lt,512),[[Q,o.profile.graduated]])]),t("button",{class:"btn btn-danger",onClick:e[9]||(e[9]=a=>o.editing=!1)},"Cancel"),ct],32)}var ut=v(Me,[["render",dt]]),_t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ut});const pt="modulepreload",B={},mt="/network/",A=function(e,r){return!r||r.length===0?e():Promise.all(r.map(s=>{if(s=`${mt}${s}`,s in B)return;B[s]=!0;const n=s.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":pt,n||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),n)return new Promise((h,x)=>{a.addEventListener("load",h),a.addEventListener("error",x)})})).then(()=>e())};function gt(o){switch(o){case"./pages/AboutPage.vue":return A(()=>import("./AboutPage.4fff3ba4.js"),["assets/AboutPage.4fff3ba4.js","assets/vendor.0c60887e.js"]);case"./pages/AccountPage.vue":return A(()=>import("./AccountPage.6d5d54c4.js"),["assets/AccountPage.6d5d54c4.js","assets/AccountPage.1d38451d.css","assets/vendor.0c60887e.js"]);case"./pages/HomePage.vue":return A(()=>import("./HomePage.71177a81.js"),["assets/HomePage.71177a81.js","assets/HomePage.6c1fb764.css","assets/vendor.0c60887e.js"]);case"./pages/ProfilePage.vue":return A(()=>import("./ProfilePage.030e9bc6.js"),["assets/ProfilePage.030e9bc6.js","assets/ProfilePage.b2859a1b.css","assets/vendor.0c60887e.js"]);case"./pages/SearchPage.vue":return A(()=>import("./SearchPage.ff488b2a.js"),[]);default:return new Promise(function(e,r){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function C(o){return()=>gt(`./pages/${o}.vue`)}const ft=[{path:"/",name:"Home",component:C("HomePage")},{path:"/about",name:"About",component:C("AboutPage")},{path:"/profile/:id",name:"ProfilePage",component:C("ProfilePage")},{path:"/account",name:"Account",component:C("AccountPage"),beforeEnter:Z}],j=X({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:J(),routes:ft});class ht{async getAccount(){try{const e=await p.get("/account");l.account=e.data}catch(e){c.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async editAccount(e){await p.put("account",e)}}const bt=new ht,vt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class yt{constructor(e=!1,r=q){}on(e,r){var s;return(s=this.socket)==null||s.on(e,r.bind(this)),this}onConnected(e){c.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){c.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var r;(r=this.socket)==null||r.emit(vt.authenticate,e)}onError(e){c.error("[SOCKET_ERROR]",e)}enqueue(e,r){c.log("[ENQUEING_ACTION]",{action:e,payload:r}),this.queue.push({action:e,payload:r})}playback(){c.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(r=>{this.emit(r.action,r.payload)})}emit(e,r=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,r);if(!this.connected)return this.enqueue(e,r);this.socket.emit(e,r)}}class Pt extends yt{constructor(){super();this.on("error",this.onError)}onError(e){f.toast(e.message,"error")}}const M=new Pt,m=ee({domain:ie,clientId:le,audience:ce,useRefreshTokens:!0,onRedirectCallback:o=>{j.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});m.on(m.AUTH_EVENTS.AUTHENTICATED,async function(){p.defaults.headers.authorization=m.bearer,p.interceptors.request.use(wt),l.user=m.user,await bt.getAccount(),M.authenticate(m.bearer)});async function wt(o){if(!m.isAuthenticated)return o;const e=m.identity.exp*1e3,r=e<Date.now(),s=e<Date.now()+1e3*60*60*12;return r?await m.loginWithPopup():s&&(await m.getTokenSilently(),p.defaults.headers.authorization=m.bearer,M.authenticate(m.bearer)),o}const kt={setup(){return{user:y(()=>l.user),account:y(()=>l.account),async login(){m.loginWithPopup()},async logout(){m.logout({returnTo:window.location.origin})}}}},$t=o=>(te("data-v-2ee3180c"),o=o(),oe(),o),St={class:""},At={key:1,class:"dropdown"},Et={class:"bg-primary p-3 rounded"},Ct={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},xt={key:0},Tt=["src"],It={class:"text-primary lighten-30"},Ot={class:"dropdown-menu list-group w-100","aria-labelledby":"authDropdown"},Lt=$t(()=>t("i",{class:"mdi mdi-logout"},null,-1)),Rt=I(" logout "),Ut=[Lt,Rt];function Dt(o,e,r,s,n,i){return d(),u("span",St,[s.user.isAuthenticated?(d(),u("div",At,[t("div",Et,[t("div",Ct,[s.account.picture?(d(),u("div",xt,[t("img",{src:s.account.picture,alt:"account photo",height:"40",class:"rounded p-2"},null,8,Tt),t("span",It,P(s.account.name),1)])):E("",!0)]),t("div",Ot,[t("div",{class:"list-group-item list-group-item-action hoverable text-dark",onClick:e[1]||(e[1]=(...a)=>s.logout&&s.logout(...a))},Ut)])])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase",onClick:e[0]||(e[0]=(...a)=>s.login&&s.login(...a))}," Login "))])}var Vt=v(kt,[["render",Dt],["__scopeId","data-v-2ee3180c"]]),Nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vt});const qt={setup(){return{}}};function Bt(o,e,r,s,n,i){return null}var jt=v(qt,[["render",Bt],["__scopeId","data-v-0a2dc1a0"]]),Mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jt});const zt={setup(){return{currentPage:y(()=>l.currentPage),totalPages:y(()=>l.totalPages),async changePage(o){let e=l.currentPage+o;if(e>l.totalPages||e<=0){f.toast("You're' there","warning");return}k.changePage(e)}}}},Ht={key:0,class:"mt-3"},Ft={class:"d-flex text-right justify-content-end"},Yt={class:"h5 px-2"};function Kt(o,e,r,s,n,i){return s.totalPages>1?(d(),u("div",Ht,[t("div",Ft,[t("h5",{class:V(["text-dark",{selectable:s.currentPage>1,"lighten-10":s.currentPage==1}]),onClick:e[0]||(e[0]=a=>s.changePage(-1))}," back ",2),t("div",Yt,P(s.currentPage),1),t("h5",{class:V(["text-dark",{selectable:s.currentPage!=s.totalPages,"lighten-10":s.currentPage==s.totalPages}]),onClick:e[1]||(e[1]=a=>s.changePage(1))}," next ",2)])])):E("",!0)}var Gt=v(zt,[["render",Kt]]),Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gt});const Qt={props:{post:{type:Object,required:!0}},setup(o){const e=new Date(o.post.createdAt).toDateString();se();const r=re();return{goToProfile(){r.push({name:"Profile",params:{id:o.post.creatorId}})},async deletePost(){try{await f.confirm()&&(await k.deletePost(o.post.id),f.toast("Delorted!","success"))}catch(s){c.error(s),f.toast(s.message,"error")}},async likePost(s){try{await k.likePost(s)}catch(n){c.error(n),f.toast(n.message,"error")}},date:e,account:y(()=>l.account)}}},Xt={class:"d-flex col-12 rounded border-dark w-100 mt-4 bg-light",id:"Post"},Jt={class:"row"},Zt={class:"col-3"},eo=["src"],to={class:"p-4 col-8"},oo={class:"d-flex"},so={class:"text-secondary text-uppercase"},ro={key:0},ao={class:"muted"},no=["src"],io={class:"m-0 p-0"},lo={key:0};function co(o,e,r,s,n,i){const a=w("router-link");return d(),u("div",Xt,[t("div",Jt,[t("div",Zt,[$(a,{to:{name:"ProfilePage",params:{id:r.post.creator.id}}},{default:T(()=>[t("img",{class:"p-4 rounded-circle img-fluid w-100",src:r.post.creator.picture},null,8,eo)]),_:1},8,["to"])]),t("div",to,[t("div",oo,[t("h5",so,P(r.post.creator.name),1),r.post.creatorId==s.account.id?(d(),u("div",ro,[t("i",{class:"mdi mdi-delete selectable",onClick:e[0]||(e[0]=h=>s.deletePost())})])):E("",!0)]),t("small",ao,"Created on: "+P(s.date),1),t("img",{class:"postimg col-12",src:r.post.imgUrl},null,8,no),t("p",io,P(r.post.body),1),s.account.id?(d(),u("h5",lo,[I(P(r.post.likes.length),1),t("i",{class:"mdi mdi-cash-100 text-secondary selectable",onClick:e[1]||(e[1]=h=>s.likePost(r.post))})])):E("",!0)])])])}var uo=v(Qt,[["render",co]]),_o=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:uo});const po={setup(){return{}}},mo={class:"col-12 d-flex rounded border-dark m-3 bg-light",id:"Post"},go={class:"p-4"},fo=t("small",{class:"muted"},"created at",-1),ho=t("p",{class:"m-0 p-0"},"body",-1),bo=t("i",{class:"mdi mdi-cash-100 selectable"},null,-1);function vo(o,e,r,s,n,i){return d(),u("div",mo,[t("div",go,[fo,ho,t("h5",null,[I(P(o.likes),1),bo])])])}var yo=v(po,[["render",vo]]),Po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yo});const wo={setup(){const o=U("");return{query:o,async findPosts(){try{await k.search(o.value)}catch(e){c.error(e),f.toast(e.message,"error")}}}}},ko={class:"form-group d-flex align-items-center"},$o=t("label",{for:"search",class:"sr-only"},null,-1),So=t("button",{class:"btn p-2",type:"submit"},[t("i",{class:"mdi mdi-magnify"})],-1);function Ao(o,e,r,s,n,i){return d(),u("form",{onSubmit:e[1]||(e[1]=D((...a)=>s.findPosts&&s.findPosts(...a),["prevent"])),class:"w-100 p-2 rounded bg-primary"},[t("div",ko,[$o,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.query=a),type:"text",name:"search",class:"form-control bg-white",placeholder:"search matching posts"},null,512),[[b,s.query]]),So])],32)}var Eo=v(wo,[["render",Ao]]),Co=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Eo});function xo(o){Object.entries({"./components/Billboard.vue":Ce,"./components/CreatePostForm.vue":je,"./components/EditProfileForm.vue":_t,"./components/Login.vue":Nt,"./components/Navbar.vue":Mt,"./components/Pager.vue":Wt,"./components/Post.vue":_o,"./components/ProfileDetails.vue":Po,"./components/SearchForm.vue":Co}).forEach(([r,s])=>{const n=s.name||r.substr(r.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(n,s.default)})}const z=ae(ke);xo(z);z.use(j).mount("#app");export{l as A,f as P,v as _,p as a,bt as b,c as l,k as p};
